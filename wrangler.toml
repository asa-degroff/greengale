name = "greengale"
compatibility_date = "2024-12-01"
main = "workers/api/index.ts"

# D1 Database
[[d1_databases]]
binding = "DB"
database_name = "greengale"
database_id = "81ee3700-f80c-45fc-ac0b-37b6cdcd23e3"

# KV Namespace for caching
[[kv_namespaces]]
binding = "CACHE"
id = "fffa62967ac248d59085cc895ddd7044"

# Durable Objects for firehose consumer
[[durable_objects.bindings]]
name = "FIREHOSE"
class_name = "FirehoseConsumer"

[[migrations]]
tag = "v1"
new_sqlite_classes = ["FirehoseConsumer"]

# Cron triggers for firehose watchdog
[triggers]
crons = ["*/5 * * * *"]  # Every 5 minutes

# Environment variables
[vars]
RELAY_URL = "wss://bsky.network"
